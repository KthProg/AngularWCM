function changeImage(e, t) { var n = e.val() == ""; t.attr("src", n ? "res/upload.png" : "res/uploadgreen.png") } function imgToBase64(e, t) { var n = new FileReader; n.onload = function (e) { args = { name: r, line: t, URI: e.target.result }; angular.element("[ng-app='wcm']").injector().get("$rootScope").$broadcast("uploadImage", args) }; var r = e.files[0].fileName || e.files[0].name; var t = t; n.readAsDataURL(e.files[0]) } function drawSketch() { var e = $("canvas"); var t = e[0].getContext("2d"); var n = e.offset(); var r = mouse.x - n.left; var i = mouse.y - n.top; t.fillStyle = $("#colorPicker").val(); if (mouse.left) { t.fillRect(r, i, $("#brushSize").val(), $("#brushSize").val()) } } function clearSketch() { var e = $("canvas"); var t = e[0].getContext("2d"); t.clearRect(0, 0, e.width(), e.height()) } function alterHTMLForEmail() { var e = "<html>\r\n	<head>\r\n		<style>\r\n"; e += getAllCSS(); e += "		</style>\r\n	</head>\r\n	<body>\r\n"; e += $(document.body).html(); $("input, select, textarea").each(function () { var t = "", n = ""; if ((t = $(this).attr("ng-model")) && (n = $(this).prop("tagName"))) { var r = "<" + n + ".*" + t.replace("]", "\\]").replace("[", "\\[") + ".*(/>|>|</" + n + ">)"; e = e.replace(new RegExp(r, "i"), "<textarea>" + getInputValue($(this)) + "</textarea>") } }); e += "	</body>\r\n</html>"; return e } function getInputValue(e) { switch (e.prop("tagName")) { case "SELECT": return e.children("option:selected").text(); break; case "INPUT": case "TEXTAREA": return e.val(); break } } function getAllCSS() { var e = ""; for (var t = 0, n = document.styleSheets.length; t < n; ++t) { if (document.styleSheets[t].cssRules) { for (var r = 0, i = document.styleSheets[t].cssRules.length; r < i; ++r) { e += document.styleSheets[t].cssRules[r].cssText } } } return e } function objectValuesToArray(e) { return $.map(e, function (e, t) { return [e] }) } var app = angular.module("wcm", []); var mouse = { x: 0, y: 0, left: false }; document.addEventListener("mousemove", function (e) { mouse.x = e.pageX || e.clientX; mouse.y = e.pageY || e.clientY }, false); document.addEventListener("mousedown", function (e) { mouse.left = e.button === 0 }, false); document.addEventListener("mouseup", function (e) { mouse.left = false }, false)